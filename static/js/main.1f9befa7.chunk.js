(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{11:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return b}));var r=n(6),c=n.n(r),a=n(12),u=n(8),o=n.n(u),s=n(4);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=Object(s.c)("contacts/fetchContacts",Object(a.a)(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.get("/contacts");case 3:return e=t.sent,console.log(e.data),t.abrupt("return",e.data);case 8:return t.prev=8,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))),l=Object(s.c)("contacts/addContact",function(){var t=Object(a.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("/contacts",e);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:return t.prev=7,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()),b=Object(s.c)("contacts/deleteContact",function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.delete("/contacts/".concat(e));case 3:return t.abrupt("return",e);case 6:return t.prev=6,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}());Object(s.c)("contacts/deleteContact",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.patch("/contacts/".concat(e),n);case 3:return r=t.sent,t.abrupt("return",r);case 7:return t.prev=7,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}())},13:function(t,e,n){"use strict";n.d(e,"d",(function(){return b})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return p})),n.d(e,"a",(function(){return j}));var r=n(6),c=n.n(r),a=n(12),u=n(8),o=n.n(u),s=n(4);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=function(t){o.a.defaults.headers.common.Authorization="Bearer ".concat(t)},l=function(){o.a.defaults.headers.common.Authorization=""},b=Object(s.c)("auth/register",function(){var t=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("/users/signup",e);case 3:return n=t.sent,r=n.data,i(r.token),t.abrupt("return",r);case 9:return t.prev=9,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),f=Object(s.c)("auth/login",function(){var t=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("/users/login",e);case 3:return n=t.sent,r=n.data,i(r.token),t.abrupt("return",r);case 9:return t.prev=9,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),p=Object(s.c)("auth/logout",function(){var t=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("users/logout",e);case 3:return n=t.sent,r=n.data,l(),t.abrupt("return",r);case 9:return t.prev=9,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),j=Object(s.c)("auth/refresh",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,u,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return i(a),t.prev=5,t.next=8,o.a.get("/users/current");case 8:return u=t.sent,s=u.data,t.abrupt("return",s);case 13:return t.prev=13,t.t0=t.catch(5),console.log(t.t0),t.abrupt("return",t.t0);case 17:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}())},19:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n(40),c=n(41),a=n(44),u=n(43),o=n(0),s=n(42),i=n.n(s),l=(n(94),n(1)),b=function(t){Object(a.a)(n,t);var e=Object(u.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(l.jsx)(i.a,{type:"ThreeDots",color:"#f0f0f0",height:50,width:150,timeout:2e4})}}]),n}(o.Component)},26:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return a}));var r=function(t){return t.auth.isLoggedIn},c=function(t){return t.auth.user.name},a=function(t){return t.auth.isFetchingCurrent}},36:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(4),c=Object(r.b)("contacts/onChangeFilter")},96:function(t,e,n){},97:function(t,e,n){},98:function(t,e,n){"use strict";n.r(e);var r,c,a,u=n(0),o=n.n(u),s=n(22),i=n.n(s),l=n(24),b=n(15),f=n(38),p=n(23),j=n(4),d=n(39),h=n.n(d),O=n(14),g=n(3),v=n(7),x=n(11),k=n(36),m=Object(j.d)([],(r={},Object(g.a)(r,x.c.fulfilled,(function(t,e){return e.payload})),Object(g.a)(r,x.a.fulfilled,(function(t,e){var n=e.payload;return[].concat(Object(p.a)(t),[n])})),Object(g.a)(r,x.b.fulfilled,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),r)),w=Object(j.d)("",Object(g.a)({},k.a,(function(t,e){return e.payload}))),y=Object(j.d)(!1,(c={},Object(g.a)(c,x.c.pending,(function(){return!0})),Object(g.a)(c,x.c.fulfilled,(function(){return!1})),Object(g.a)(c,x.c.rejected,(function(){return!1})),Object(g.a)(c,x.a.pending,(function(){return!0})),Object(g.a)(c,x.a.fulfilled,(function(){return!1})),Object(g.a)(c,x.a.rejected,(function(){return!1})),Object(g.a)(c,x.b.pending,(function(){return!0})),Object(g.a)(c,x.b.fulfilled,(function(){return!1})),Object(g.a)(c,x.b.rejected,(function(){return!1})),c)),C=Object(v.b)({items:m,filter:w,loading:y}),L=n(13),I=Object(j.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,getFetchCurrentUser:!1},extraReducers:(a={},Object(g.a)(a,L.d.fulfilled,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isLoggedIn=!0})),Object(g.a)(a,L.b.fulfilled,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isLoggedIn=!0})),Object(g.a)(a,L.c.fulfilled,(function(t){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(g.a)(a,L.a.pending,(function(t){t.getFetchCurrentUser=!0})),Object(g.a)(a,L.a.fulfilled,(function(t,e){var n=e.payload;t.user=n,t.isLoggedIn=!0,t.getFetchCurrentUser=!1})),Object(g.a)(a,L.a.rejected,(function(t){t.getFetchCurrentUser=!1})),a)}).reducer,S=Object(p.a)(Object(j.f)({serializableCheck:{ignoredActions:[O.a,O.f,O.b,O.c,O.d,O.e]}})),z={key:"auth",storage:h.a,whitelist:["token","isLoggedIn"]},F=Object(j.a)({reducer:{auth:Object(O.g)(z,I),contacts:C},middleware:S}),U=Object(O.h)(F),A=(n(75),n(2)),R=n(19),B=n(26),E=(n(96),n(1)),J=Object(u.lazy)((function(){return n.e(4).then(n.bind(null,108))})),D=Object(u.lazy)((function(){return n.e(5).then(n.bind(null,109))})),M=Object(u.lazy)((function(){return n.e(3).then(n.bind(null,107))})),T=Object(u.lazy)((function(){return n.e(6).then(n.bind(null,110))}));function V(){var t=Object(b.c)(B.b),e=Object(b.b)(),n=Object(b.c)(B.a);return Object(u.useEffect)((function(){e(Object(L.a)())}),[e]),!n&&Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(A.d,{children:[Object(E.jsx)(A.b,{path:"/",element:t?Object(E.jsx)(A.a,{replace:!0,to:"/phonebook"}):Object(E.jsx)(A.a,{replace:!0,to:"/login"})}),Object(E.jsx)(A.b,{path:"/login",element:t?Object(E.jsx)(A.a,{replace:!0,to:"/phonebook"}):Object(E.jsx)(u.Suspense,{fallback:Object(E.jsx)(R.a,{}),children:Object(E.jsx)(J,{})})}),Object(E.jsx)(A.b,{path:"/registration",element:t?Object(E.jsx)(A.a,{replace:!0,to:"/phonebook"}):Object(E.jsx)(u.Suspense,{fallback:Object(E.jsx)(R.a,{}),children:Object(E.jsx)(D,{})})}),Object(E.jsx)(A.b,{path:"/phonebook/*",element:t?Object(E.jsx)(u.Suspense,{Suspense:!0,fallback:Object(E.jsx)(R.a,{}),children:Object(E.jsx)(M,{})}):Object(E.jsx)(A.a,{replace:!0,to:"/login"})}),Object(E.jsx)(A.b,{path:"/*",element:t?Object(E.jsx)(u.Suspense,{fallback:Object(E.jsx)(R.a,{}),children:Object(E.jsx)(T,{})}):Object(E.jsx)(A.a,{replace:!0,to:"/login"})})]})})}n(97);i.a.render(Object(E.jsx)(o.a.StrictMode,{children:Object(E.jsx)(b.a,{store:F,children:Object(E.jsx)(f.a,{loading:null,persistor:U,children:Object(E.jsx)(l.a,{children:Object(E.jsx)(V,{})})})})}),document.getElementById("root"))}},[[98,1,2]]]);
//# sourceMappingURL=main.1f9befa7.chunk.js.map